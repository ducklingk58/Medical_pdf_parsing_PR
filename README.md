# ğŸ¥ Medical PDF íŒŒì‹± í”„ë¡œì íŠ¸ (Medical_pdf_parsing_PR)

Unstructured ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ ëŒ€ëŸ‰ ì˜ë£Œ PDF ê³ ê¸‰ íŒŒì‹± ì‹œìŠ¤í…œ

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” 500ê°œì˜ ì˜ë£Œ ì œí’ˆ ê´€ë ¨ PDF íŒŒì¼ì„ Unstructured ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ ê³ ê¸‰ íŒŒì‹± ë° í›„ì²˜ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ ì¶”ì¶œ, í‘œ êµ¬ì¡°í™”, ì´ë¯¸ì§€ ì²˜ë¦¬, ë¬¸ì¥ ì—°ê²°, RAG ì¹œí™”ì  ì²­í‚¹ì„ í¬í•¨í•œ ì¢…í•©ì ì¸ PDF ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ì„ ì œê³µí•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ”§ í•µì‹¬ íŒŒì‹± ê¸°ëŠ¥
- **Unstructured ê¸°ë°˜ ê³ ê¸‰ íŒŒì‹±**: PDFì—ì„œ í…ìŠ¤íŠ¸, í‘œ, ì´ë¯¸ì§€ ì¶”ì¶œ
- **ì˜ë¯¸ë¡ ì  ë¬¸ì¥ ì—°ê²°**: sentence-transformersë¥¼ í™œìš©í•œ ì§€ëŠ¥í˜• í…ìŠ¤íŠ¸ ì¬êµ¬ì„±
- **êµ¬ì¡°í™”ëœ í‘œ ì²˜ë¦¬**: pandas DataFrameìœ¼ë¡œ ì¦‰ì‹œ ë³€í™˜
- **RAG ì¹œí™”ì  ì²­í‚¹**: ê²€ìƒ‰ ì‹œìŠ¤í…œ ìµœì í™”ëœ í…ìŠ¤íŠ¸ ë¶„í• 

### ğŸš€ ì²˜ë¦¬ ì„±ëŠ¥
- **ë³‘ë ¬ ì²˜ë¦¬**: ThreadPoolExecutorë¡œ ëŒ€ëŸ‰ íŒŒì¼ íš¨ìœ¨ ì²˜ë¦¬
- **ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§**: tqdmì„ í™œìš©í•œ ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í‘œì‹œ
- **ì˜¤ë¥˜ ê´€ë¦¬**: íŒŒì¼ë³„ ì˜¤ë¥˜ ë¡œê·¸ì™€ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹… ì‹œìŠ¤í…œ

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ì‹œê°í™”
- **Streamlit ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ì²˜ë¦¬ í˜„í™© ì‹œê°í™”
- **í’ˆì§ˆ ê²€ì¦**: ìë™í™”ëœ ê²°ê³¼ ê²€ì¦ ë° ë³´ê³ ì„œ ìƒì„±
- **í†µê³„ ë¶„ì„**: ìƒì„¸í•œ ì²˜ë¦¬ í†µê³„ ë° í’ˆì§ˆ ì§€í‘œ

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Medical_pdf_parsing_PR/
â”œâ”€â”€ input_pdfs/                    # ì…ë ¥ PDF íŒŒì¼ë“¤ (500ê°œ)
â”œâ”€â”€ output_data/                   # íŒŒì‹± ê²°ê³¼ ì €ì¥
â”‚   â”œâ”€â”€ {filename_without_ext}/    # ê° PDFë³„ ê²°ê³¼ ë””ë ‰í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ text/                  # ì •ì œëœ í…ìŠ¤íŠ¸ íŒŒì¼ë“¤
â”‚   â”‚   â”œâ”€â”€ tables/                # ì¶”ì¶œëœ í‘œ ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ images/                # ì¶”ì¶œëœ ì´ë¯¸ì§€ë“¤
â”‚   â”‚   â”œâ”€â”€ metadata/              # ë©”íƒ€ë°ì´í„° JSON íŒŒì¼ë“¤
â”‚   â”‚   â”œâ”€â”€ summary.json           # íŒŒì‹± ìš”ì•½ ì •ë³´
â”‚   â”‚   â””â”€â”€ final_markdown.md      # ìµœì¢… ë§ˆí¬ë‹¤ìš´ íŒŒì¼
â”œâ”€â”€ logs/                          # ë¡œê·¸ íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ processing.log             # ì „ì²´ ì²˜ë¦¬ ë¡œê·¸
â”‚   â””â”€â”€ error_{filename}.txt       # íŒŒì¼ë³„ ì˜¤ë¥˜ ë¡œê·¸
â”œâ”€â”€ config/                        # ì„¤ì • íŒŒì¼ë“¤
â”‚   â””â”€â”€ settings.py                # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ utils/                         # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
â”‚   â”œâ”€â”€ pdf_processor.py           # PDF ì²˜ë¦¬ê¸°
â”‚   â”œâ”€â”€ logger.py                  # ë¡œê¹… ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ validation.py              # ê²€ì¦ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ dashboard/                     # ì‹œê°í™” ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ app.py                     # Streamlit ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ main_processor.py              # ë°°ì¹˜ ì²˜ë¦¬ê¸°
â”œâ”€â”€ run_processing.py              # ë©”ì¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ requirements.txt               # ì˜ì¡´ì„± ëª©ë¡
â””â”€â”€ README.md                      # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

## ğŸš€ ì„¤ì¹˜ ë° ì„¤ì •

### 1. í™˜ê²½ ì„¤ì •

```bash
# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
conda create -n medical_pdf_parsing python=3.11
conda activate medical_pdf_parsing

# ë˜ëŠ” venv ì‚¬ìš©
python -m venv medical_pdf_parsing_env
# Windows
medical_pdf_parsing_env\Scripts\activate
# Linux/Mac
source medical_pdf_parsing_env/bin/activate
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd Medical_pdf_parsing_PR

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 3. PDF íŒŒì¼ ì¤€ë¹„

```bash
# input_pdfs ë””ë ‰í† ë¦¬ì— PDF íŒŒì¼ë“¤ì„ ë³µì‚¬
cp /path/to/your/pdfs/*.pdf input_pdfs/
```

## ğŸ“– ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì‹¤í–‰

```bash
# ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ëª¨ë“  PDF íŒŒì¼ ì²˜ë¦¬
python run_processing.py
```

### ê³ ê¸‰ ì˜µì…˜

```bash
# ì…ë ¥/ì¶œë ¥ ë””ë ‰í† ë¦¬ ì§€ì •
python run_processing.py --input ./my_pdfs --output ./my_results

# ë³‘ë ¬ ì²˜ë¦¬ ì›Œì»¤ ìˆ˜ ì§€ì •
python run_processing.py --workers 8

# ê²€ì¦ë§Œ ì‹¤í–‰
python run_processing.py --validate-only

# ê²€ì¦ ë³´ê³ ì„œ ìƒì„±
python run_processing.py --create-report

# íŒŒì¼ ë¬´ê²°ì„± ê²€ì‚¬
python run_processing.py --check-integrity

# Streamlit ëŒ€ì‹œë³´ë“œ ì‹¤í–‰
python run_processing.py --dashboard
```

### ëŒ€ì‹œë³´ë“œ ì‹¤í–‰

```bash
# ë³„ë„ë¡œ ëŒ€ì‹œë³´ë“œ ì‹¤í–‰
streamlit run dashboard/app.py
```

## ğŸ”§ ì„¤ì • ì˜µì…˜

`config/settings.py`ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# ì²˜ë¦¬ ì„¤ì •
MAX_WORKERS = 4                    # ë³‘ë ¬ ì²˜ë¦¬ ì›Œì»¤ ìˆ˜
SIMILARITY_THRESHOLD = 0.7         # ë¬¸ì¥ ì—°ê²° ìœ ì‚¬ë„ ì„ê³„ê°’
CHUNK_SIZE = 512                   # RAG ì²­í¬ í¬ê¸°
CHUNK_OVERLAP = 50                 # ì²­í¬ ì¤‘ë³µ í¬ê¸°

# PDF ì²˜ë¦¬ ì„¤ì •
PDF_EXTRACT_IMAGES = True          # ì´ë¯¸ì§€ ì¶”ì¶œ í™œì„±í™”
PDF_EXTRACT_TABLES = True          # í‘œ ì¶”ì¶œ í™œì„±í™”
INCLUDE_IMAGE_METADATA = True      # ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° í¬í•¨

# í…ìŠ¤íŠ¸ ì •ì œ ì„¤ì •
REMOVE_PAGE_NUMBERS = True         # í˜ì´ì§€ ë²ˆí˜¸ ì œê±°
REMOVE_HEADERS_FOOTERS = True      # í—¤ë”/í‘¸í„° ì œê±°
```

## ğŸ“Š ì¶œë ¥ ê²°ê³¼

### ê°œë³„ PDF ê²°ê³¼ êµ¬ì¡°

ê° PDF íŒŒì¼ë³„ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ìƒì„±ë©ë‹ˆë‹¤:

```
output_data/{filename}/
â”œâ”€â”€ summary.json              # íŒŒì‹± ìš”ì•½ ì •ë³´
â”œâ”€â”€ metadata.json             # ìƒì„¸ ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ final_markdown.md         # ìµœì¢… ë§ˆí¬ë‹¤ìš´ íŒŒì¼
â”œâ”€â”€ tables/                   # ì¶”ì¶œëœ í‘œ ë°ì´í„°
â”‚   â”œâ”€â”€ table_001.json       # JSON í˜•íƒœ
â”‚   â”œâ”€â”€ table_001.csv        # CSV í˜•íƒœ
â”‚   â””â”€â”€ ...
â””â”€â”€ images/                   # ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°
    â”œâ”€â”€ image_001.json
    â””â”€â”€ ...
```

### ë°°ì¹˜ ì²˜ë¦¬ ê²°ê³¼

```
output_data/
â”œâ”€â”€ batch_summary.json        # ì „ì²´ ë°°ì¹˜ ì²˜ë¦¬ ìš”ì•½
â”œâ”€â”€ validation_report.json    # ê²€ì¦ ë³´ê³ ì„œ
â”œâ”€â”€ validation_report.xlsx    # Excel í˜•íƒœ ê²€ì¦ ë³´ê³ ì„œ
â””â”€â”€ logs/                     # ë¡œê·¸ íŒŒì¼ë“¤
    â”œâ”€â”€ processing_*.log      # ì²˜ë¦¬ ë¡œê·¸
    â”œâ”€â”€ errors_*.log          # ì˜¤ë¥˜ ë¡œê·¸
    â””â”€â”€ error_{filename}.txt  # íŒŒì¼ë³„ ì˜¤ë¥˜ ë¡œê·¸
```

## ğŸ” í’ˆì§ˆ ê²€ì¦

### ìë™ ê²€ì¦ ê¸°ëŠ¥

- **í…ìŠ¤íŠ¸ ë¸”ë¡ ê²€ì¦**: í…ìŠ¤íŠ¸ ì¶”ì¶œ ì„±ê³µ ì—¬ë¶€ í™•ì¸
- **í‘œ ë°ì´í„° ê²€ì¦**: êµ¬ì¡°í™”ëœ ë°ì´í„° ë³€í™˜ í™•ì¸
- **RAG ì²­í¬ ê²€ì¦**: ì²­í‚¹ í”„ë¡œì„¸ìŠ¤ í™•ì¸
- **íŒŒì¼ ë¬´ê²°ì„± ê²€ì‚¬**: í•„ìˆ˜ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

### í’ˆì§ˆ ì§€í‘œ

- **í’ˆì§ˆ ì ìˆ˜**: 0-1 ë²”ìœ„ì˜ ì¢…í•© í’ˆì§ˆ í‰ê°€
- **í‰ê·  ì²˜ë¦¬ ì‹œê°„**: íŒŒì¼ë‹¹ í‰ê·  ì²˜ë¦¬ ì‹œê°„
- **ì„±ê³µë¥ **: ì „ì²´ ì²˜ë¦¬ ì„±ê³µë¥ 
- **ì´ìƒì¹˜ íƒì§€**: ë¹„ì •ìƒì ì¸ ê²°ê³¼ ìë™ íƒì§€

## ğŸ“ˆ ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥

### ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

- **ì²˜ë¦¬ ì§„í–‰ë¥ **: ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì‹œê°í™”
- **ì„±ê³µ/ì‹¤íŒ¨ í†µê³„**: ì²˜ë¦¬ ê²°ê³¼ ë¶„í¬ ì°¨íŠ¸
- **í’ˆì§ˆ ì§€í‘œ**: ë‹¤ì–‘í•œ í’ˆì§ˆ ë©”íŠ¸ë¦­ í‘œì‹œ

### ìƒì„¸ ë¶„ì„

- **íŒŒì¼ë³„ ìƒì„¸ ì •ë³´**: ê°œë³„ íŒŒì¼ ì²˜ë¦¬ ê²°ê³¼
- **í†µê³„ ì°¨íŠ¸**: í…ìŠ¤íŠ¸ ë¸”ë¡, í‘œ, ì´ë¯¸ì§€ ë¶„í¬
- **ì´ìƒì¹˜ íƒì§€**: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ìë™ ì‹ë³„

## ğŸ› ï¸ ê³ ê¸‰ ê¸°ëŠ¥

### ì˜ë¯¸ë¡ ì  ë¬¸ì¥ ì—°ê²°

sentence-transformersë¥¼ í™œìš©í•˜ì—¬ ë…¼ë¦¬ì ìœ¼ë¡œ ì—°ê²°ëœ í…ìŠ¤íŠ¸ ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤:

```python
# ìœ ì‚¬ë„ ê¸°ë°˜ ë¬¸ì¥ ì—°ê²°
similarity = calculate_similarity(text1, text2)
if similarity >= threshold:
    # ë¬¸ì¥ ì—°ê²°
    connected_text = text1 + "\n\n" + text2
```

### êµ¬ì¡°í™”ëœ í‘œ ì²˜ë¦¬

Unstructuredì˜ `text_as_csv`ë¥¼ pandas DataFrameìœ¼ë¡œ ì¦‰ì‹œ ë³€í™˜:

```python
# CSV í˜•íƒœë¡œ êµ¬ì¡°í™”
df = pd.read_csv(io.StringIO(element.metadata.text_as_csv))
table_data["structured_data"] = df.to_dict('records')
```

### RAG ì¹œí™”ì  ì²­í‚¹

ê²€ìƒ‰ ì‹œìŠ¤í…œì— ìµœì í™”ëœ í…ìŠ¤íŠ¸ ì²­í‚¹:

```python
# ì¤‘ë³µì„ í¬í•¨í•œ ì²­í‚¹
for i in range(0, len(words), chunk_size - overlap):
    chunk_words = words[i:i + chunk_size]
    chunks.append({
        "text": ' '.join(chunk_words),
        "word_count": len(chunk_words),
        "token_estimate": len(chunk_words) * 1.3
    })
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
   - `MAX_WORKERS` ìˆ˜ë¥¼ ì¤„ì´ì„¸ìš”
   - `CHUNK_SIZE`ë¥¼ ì¤„ì´ì„¸ìš”

2. **ì²˜ë¦¬ ì†ë„ ê°œì„ **
   - `MAX_WORKERS` ìˆ˜ë¥¼ ëŠ˜ë¦¬ì„¸ìš”
   - GPU ê°€ì†ì„ í™œìš©í•˜ì„¸ìš”

3. **í’ˆì§ˆ ê°œì„ **
   - `SIMILARITY_THRESHOLD`ë¥¼ ì¡°ì •í•˜ì„¸ìš”
   - í…ìŠ¤íŠ¸ ì •ì œ íŒ¨í„´ì„ ì¶”ê°€í•˜ì„¸ìš”

### ë¡œê·¸ í™•ì¸

```bash
# ì²˜ë¦¬ ë¡œê·¸ í™•ì¸
tail -f logs/processing_*.log

# ì˜¤ë¥˜ ë¡œê·¸ í™•ì¸
tail -f logs/errors_*.log

# íŠ¹ì • íŒŒì¼ ì˜¤ë¥˜ í™•ì¸
cat logs/error_{filename}.txt
```

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ¤ ê¸°ì—¬

ë²„ê·¸ ë¦¬í¬íŠ¸, ê¸°ëŠ¥ ìš”ì²­, í’€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤.

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. ë¡œê·¸ íŒŒì¼ í™•ì¸
2. ì„¤ì • íŒŒì¼ ê²€í† 
3. ì˜ì¡´ì„± ë²„ì „ í™•ì¸
4. GitHub Issues ë“±ë¡

---

**Medical_pdf_parsing_PR** - ì˜ë£Œ PDF ê³ ê¸‰ íŒŒì‹± ì‹œìŠ¤í…œ 